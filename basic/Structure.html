<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>结构体 | T8840 Blog</title>
    <meta name="generator" content="VuePress 1.9.8">
    
    <meta name="description" content="T8840的博客">
    
    <link rel="preload" href="/go/assets/css/0.styles.5e6b7161.css" as="style"><link rel="preload" href="/go/assets/js/app.3a476b27.js" as="script"><link rel="preload" href="/go/assets/js/3.03adf80f.js" as="script"><link rel="preload" href="/go/assets/js/1.912b4b55.js" as="script"><link rel="preload" href="/go/assets/js/30.3d127f37.js" as="script"><link rel="prefetch" href="/go/assets/js/10.ac66692f.js"><link rel="prefetch" href="/go/assets/js/11.661ba498.js"><link rel="prefetch" href="/go/assets/js/12.fee4a533.js"><link rel="prefetch" href="/go/assets/js/13.67729601.js"><link rel="prefetch" href="/go/assets/js/14.fab624d7.js"><link rel="prefetch" href="/go/assets/js/15.3f71e646.js"><link rel="prefetch" href="/go/assets/js/16.0f36b50a.js"><link rel="prefetch" href="/go/assets/js/17.51e1ef91.js"><link rel="prefetch" href="/go/assets/js/18.23a878d0.js"><link rel="prefetch" href="/go/assets/js/19.ad6a6966.js"><link rel="prefetch" href="/go/assets/js/20.367169f3.js"><link rel="prefetch" href="/go/assets/js/21.7607eb5a.js"><link rel="prefetch" href="/go/assets/js/22.1b9384a4.js"><link rel="prefetch" href="/go/assets/js/23.e3e42ad5.js"><link rel="prefetch" href="/go/assets/js/24.11a9b6e7.js"><link rel="prefetch" href="/go/assets/js/25.56bbf31c.js"><link rel="prefetch" href="/go/assets/js/26.95aaa91f.js"><link rel="prefetch" href="/go/assets/js/27.ee51a228.js"><link rel="prefetch" href="/go/assets/js/28.c1369c64.js"><link rel="prefetch" href="/go/assets/js/29.46133cc7.js"><link rel="prefetch" href="/go/assets/js/31.4dcc3a34.js"><link rel="prefetch" href="/go/assets/js/32.9e4a81d8.js"><link rel="prefetch" href="/go/assets/js/33.fb4862fd.js"><link rel="prefetch" href="/go/assets/js/34.97d4fdfe.js"><link rel="prefetch" href="/go/assets/js/35.e56f6578.js"><link rel="prefetch" href="/go/assets/js/36.5919dff5.js"><link rel="prefetch" href="/go/assets/js/37.6bcdf147.js"><link rel="prefetch" href="/go/assets/js/38.a4e17ea1.js"><link rel="prefetch" href="/go/assets/js/39.7afda8a8.js"><link rel="prefetch" href="/go/assets/js/4.673bf15a.js"><link rel="prefetch" href="/go/assets/js/40.ff5e4fbf.js"><link rel="prefetch" href="/go/assets/js/41.435bf236.js"><link rel="prefetch" href="/go/assets/js/42.e8b49341.js"><link rel="prefetch" href="/go/assets/js/43.6b3be06f.js"><link rel="prefetch" href="/go/assets/js/44.65f54857.js"><link rel="prefetch" href="/go/assets/js/45.ea4db177.js"><link rel="prefetch" href="/go/assets/js/46.01b2866f.js"><link rel="prefetch" href="/go/assets/js/47.771e225b.js"><link rel="prefetch" href="/go/assets/js/48.bf7b0c36.js"><link rel="prefetch" href="/go/assets/js/49.5b64e3b1.js"><link rel="prefetch" href="/go/assets/js/5.8b013b29.js"><link rel="prefetch" href="/go/assets/js/50.2ada6b48.js"><link rel="prefetch" href="/go/assets/js/51.2233b8c3.js"><link rel="prefetch" href="/go/assets/js/6.aad79307.js"><link rel="prefetch" href="/go/assets/js/7.8e49b54c.js"><link rel="prefetch" href="/go/assets/js/8.1296ca76.js"><link rel="prefetch" href="/go/assets/js/9.2ca02ffe.js">
    <link rel="stylesheet" href="/go/assets/css/0.styles.5e6b7161.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-7dd95ae2><div data-v-7dd95ae2><div class="password-shadow password-wrapper-out" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>T8840 Blog</h3> <p class="description" data-v-59e6cb88>T8840的博客</p> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><!---->
          
        <!---->
        2023
      </a></span></div></div> <div class="hide" data-v-7dd95ae2><header class="navbar" data-v-7dd95ae2><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/go/" class="home-link router-link-active"><!----> <span class="site-name">T8840 Blog</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/go/" class="nav-link"><i class="undefined"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      T8840 博客
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/t8840" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-7dd95ae2></div> <aside class="sidebar" data-v-7dd95ae2><div class="personal-info-wrapper" data-v-1fad0c41 data-v-7dd95ae2><!----> <!----> <div class="num" data-v-1fad0c41><div data-v-1fad0c41><h3 data-v-1fad0c41>28</h3> <h6 data-v-1fad0c41>文章</h6></div> <div data-v-1fad0c41><h3 data-v-1fad0c41>0</h3> <h6 data-v-1fad0c41>标签</h6></div></div> <ul class="social-links" data-v-1fad0c41></ul> <hr data-v-1fad0c41></div> <nav class="nav-links"><div class="nav-item"><a href="/go/" class="nav-link"><i class="undefined"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      T8840 博客
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/t8840" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav> <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><a href="/go/" class="sidebar-heading clickable router-link-active"><span>欢迎学习</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/go/" aria-current="page" class="sidebar-link">学前必读</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/go/basic/DesignPhilosophy" class="sidebar-heading clickable open"><span>基础学习</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/go/basic/DesignPhilosophy.html" class="sidebar-link">设计哲学</a></li><li><a href="/go/basic/InstallMethod.html" class="sidebar-link">安装方法</a></li><li><a href="/go/basic/DataStructure.html" class="sidebar-link">数据类型</a></li><li><a href="/go/basic/VariableConstants.html" class="sidebar-link">变量常量</a></li><li><a href="/go/basic/String.html" class="sidebar-link">字符串</a></li><li><a href="/go/basic/List.html" class="sidebar-link">数组切片</a></li><li><a href="/go/basic/Map.html" class="sidebar-link">Map</a></li><li><a href="/go/basic/Pointer.html" class="sidebar-link">指针</a></li><li><a href="/go/basic/Structure.html" aria-current="page" class="active sidebar-link">结构体</a></li><li><a href="/go/basic/Operator.html" class="sidebar-link">运算符</a></li><li><a href="/go/basic/Statement.html" class="sidebar-link">语句</a></li><li><a href="/go/basic/Function.html" class="sidebar-link">函数</a></li><li><a href="/go/basic/Method.html" class="sidebar-link">方法</a></li><li><a href="/go/basic/Interface.html" class="sidebar-link">接口</a></li><li><a href="/go/basic/Error.html" class="sidebar-link">错误处理</a></li><li><a href="/go/basic/Panic.html" class="sidebar-link">异常</a></li><li><a href="/go/basic/GoModule.html" class="sidebar-link">包管理</a></li><li><a href="/go/basic/Layout.html" class="sidebar-link">项目布局</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/go/concurrent/Goroutine" class="sidebar-heading clickable"><span>并发编程</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/go/concurrent/Goroutine.html" class="sidebar-link">Goroutine</a></li><li><a href="/go/concurrent/Channel.html" class="sidebar-link">channel通道</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/go/advance/Generics" class="sidebar-heading clickable"><span>进阶学习</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/go/advance/Generics.html" class="sidebar-link">泛型</a></li><li><a href="/go/advance/Reflect.html" class="sidebar-link">反射</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/go/lib/Summary" class="sidebar-heading clickable"><span>常用依赖</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/go/lib/Summary.html" class="sidebar-link">汇总</a></li><li><a href="/go/lib/DBTools.html" class="sidebar-link">DBTools</a></li><li><a href="/go/lib/FileTools.html" class="sidebar-link">FileTools</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/go/net/Tcp" class="sidebar-heading clickable"><span>网络编程</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/go/net/Tcp.html" class="sidebar-link">TCP</a></li><li><a href="/go/net/HttpServer.html" class="sidebar-link">HTTPServer</a></li><li><a href="/go/net/HttpClient.html" class="sidebar-link">HttpClient</a></li><li><a href="/go/net/Gin.html" class="sidebar-link">Gin框架</a></li><li><a href="/go/net/Beego.html" class="sidebar-link">Beego框架</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/go/project/CmdTool" class="sidebar-heading clickable"><span>项目</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/go/project/CmdTool.html" class="sidebar-link">命令行工具</a></li><li><a href="/go/project/ApiGateway.html" class="sidebar-link">Api网关</a></li><li><a href="/go/project/SimpleRpc.html" class="sidebar-link">SimpleRpc</a></li><li><a href="/go/project/SimpleRedis.html" class="sidebar-link">SimpleRedis</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/go/code/Etcd" class="sidebar-heading clickable"><span>源码解读</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/go/code/Etcd.html" class="sidebar-link">Etcd源码解读</a></li><li><a href="/go/code/Docker.html" class="sidebar-link">Docker源码解读</a></li></ul></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>结构体</h3> <!----> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><!---->
          
        <!---->
        2023
      </a></span></div></div> <div data-v-7dd95ae2><div data-v-7dd95ae2><main class="page"><section style="display:;"><div class="page-title"><h1 class="title">结构体</h1> <div data-v-8a445198><i class="iconfont reco-account" data-v-8a445198><span data-v-8a445198>T8840</span></i> <i class="iconfont reco-date" data-v-8a445198><span data-v-8a445198>2023/1/15</span></i> <!----> <!----></div></div> <div class="theme-reco-content content__default"><h2 id="结构体定义"><a href="#结构体定义" class="header-anchor">#</a> 结构体定义</h2> <p>结构体是由一系列具有相同类型或不同类型的数据构成的数据集合。</p> <p>结构体定义需要使用 type 和 struct 语句。struct 语句定义一个新的数据类型，结构体中有一个或多个成员。type 语句设定了结构体的名称。结构体的格式如下：</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">type</span> struct_variable_type <span class="token keyword">struct</span> <span class="token punctuation">{</span>
   member definition
   member definition
   <span class="token operator">...</span>
   member definition
<span class="token punctuation">}</span>
<span class="token comment">// 一旦定义了结构体类型，它就能用于变量的声明，语法格式如下：</span>
<span class="token comment">// 直接赋值</span>
variable_name <span class="token operator">:=</span> structure_variable_type <span class="token punctuation">{</span>value1<span class="token punctuation">,</span> value2<span class="token operator">...</span>valuen<span class="token punctuation">}</span>
<span class="token comment">// 或 k-v形式</span>
variable_name <span class="token operator">:=</span> structure_variable_type <span class="token punctuation">{</span> 
    key1<span class="token punctuation">:</span> value1<span class="token punctuation">,</span> 
    key2<span class="token punctuation">:</span> value2<span class="token operator">...</span><span class="token punctuation">,</span> 
    keyn<span class="token punctuation">:</span> valuen
<span class="token punctuation">}</span>
</code></pre></div><p>如果结构体类型只在它定义的包内使用，那么我们可以将类型名的首字母小写；<br>
还可以用空标识符“_”作为结构体类型定义中的字段名称。这样以空标识符为名称的字
段，不能被外部包引用，甚至无法被结构体所在的包使用。</p> <h2 id="使用结构体"><a href="#使用结构体" class="header-anchor">#</a> 使用结构体</h2> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">type</span> Course <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	Name <span class="token builtin">string</span>
	Price <span class="token builtin">int</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="空结构体"><a href="#空结构体" class="header-anchor">#</a> 空结构体</h3> <p>定义一个空结构体，也就是没有包含任何字段的结构体类型</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">type</span> Empty <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// Empty是一个不包含任何字段的空结构体类型</span>
<span class="token keyword">var</span> s Empty
<span class="token function">println</span><span class="token punctuation">(</span>unsafe<span class="token punctuation">.</span><span class="token function">Sizeof</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 0</span>
</code></pre></div><p>输出的空结构体类型变量的大小为0，也就是说，空结构体类型变量的内存占用为0。基于空结构体类型内存零开销这样的特性，我们在日常Go开发中会经常使用空结构体类型元素，作为一种“事件”信息进行Goroutine之间的通信。</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">var</span> c <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> Empty<span class="token punctuation">)</span> <span class="token comment">// 声明一个元素类型为Empty的channel</span>
c<span class="token operator">&lt;-</span>Empty<span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// 向channel写入一个“事件”</span>
</code></pre></div><p>这种以空结构体为元素类建立的channel，是目前能实现的、内存占用最小的Goroutine间通信方式。</p> <h3 id="零值结构体和nil结构体"><a href="#零值结构体和nil结构体" class="header-anchor">#</a> 零值结构体和nil结构体</h3> <p>如果不给结构体赋值，go语言会默认给每个字段采用默认值。
零值结构体是会实实在在占用内存空间的，只不过每个字段都是零值。如果结构体里面字段非常多，那么这个内存空间占用肯定也会很大。</p> <p>而nil 结构体是指结构体指针变量没有指向一个实际存在的内存。这样的指针变量只会占用 1 个指针的存储空间，也就是一个机器字的内存大小。</p> <p>多种方式零值初始结构体</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">var</span> d1 Course <span class="token operator">=</span> Course<span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">var</span> d2 Course
<span class="token keyword">var</span> d3 <span class="token operator">*</span>Course <span class="token operator">=</span> <span class="token function">new</span><span class="token punctuation">(</span>Course<span class="token punctuation">)</span> <span class="token comment">// 使用new()函数来创建一个零值结构体</span>
<span class="token keyword">var</span> d4 <span class="token operator">*</span>Course <span class="token operator">=</span> <span class="token operator">&amp;</span>Course<span class="token punctuation">{</span><span class="token punctuation">}</span>
fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>d1<span class="token punctuation">.</span>Price<span class="token punctuation">,</span>d2<span class="token punctuation">.</span>Price<span class="token punctuation">,</span>d3<span class="token punctuation">.</span>Price<span class="token punctuation">,</span>d4<span class="token punctuation">.</span>Price<span class="token punctuation">)</span>
<span class="token comment">// 下面这种方式会报异常是因为只申明不赋值默认值是nil</span>
<span class="token keyword">var</span> d5 <span class="token operator">*</span>Course
fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>d5<span class="token punctuation">.</span>Price<span class="token punctuation">)</span> <span class="token comment">// panic: runtime error: invalid memory address or nil pointer dereference</span>
</code></pre></div><p>如果一种类型采用零值初始化得到的零值变量，是有意义的，而且是直接可用的，我称这种类型为“零值可用”类型。可以说，定义零值可用类型是简化代码、改善开发者使用体验的一种重要的手段。<br>
在Go语言标准库和运行时的代码中，有很多践行“零值可用”理念的好例子，最典型的莫过
于sync包的Mutex类型了。Mutex是Go标准库中提供的、用于多个并发Goroutine之间进行同步的互斥锁。</p> <p>在Go语言中，我们只需要这几行代码就可以了：</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">var</span> mu sync<span class="token punctuation">.</span>Mutex
mu<span class="token punctuation">.</span><span class="token function">Lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
mu<span class="token punctuation">.</span><span class="token function">Unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>Go标准库的设计者很贴心地将sync.Mutex结构体的零值状态，设计为可用状态，这样开发者便可直接基于零值状态下的Mutex进行lock与unlock操作，而且不需要额外显式地对它进行初始化操作了。</p> <p>Go标准库中的bytes.Buffer结构体类型，也是一个零值可用类型的典型例子</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">var</span> b bytes<span class="token punctuation">.</span>Buffer
b<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span><span class="token string">&quot;Hello, Go&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span><span class="token function">String</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 输出：Hello, Go</span>
</code></pre></div><p>我们不需要对bytes.Buffer类型的变量b进行任何显式初始化，就可以直接通过
处于零值状态的变量b，调用它的方法进行写入和读取操作。</p> <h3 id="赋值结构体"><a href="#赋值结构体" class="header-anchor">#</a> 赋值结构体</h3> <p>Go语言并不推荐我们按字段顺序对一个结构体类型变量进行显式初始化，甚至Go官
方还在提供的go vet工具中专门内置了一条检查规则：“composites”，用来静态检查代码中结构体变量初始化是否使用了这种方法，一旦发现，就会给出警告。<br>
Go推荐我们用“field:value”形式的复合字面值，对结构体类型变量进行显式初始化，这种方式可以降低结构体类型使用者和结构体类型设计者之间的耦合，这也是Go语言的惯用法。“field:value”形式字面值中的字段可以以任意次序出现。未显式出现在字面值中的结构体字段（比如上面例子中的F5）将采用它对应类型的零值。<br>
比较少使用new这一个Go预定义的函数来创建结构体变量实例。</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">type</span> T <span class="token keyword">struct</span> <span class="token punctuation">{</span>
 F1 <span class="token builtin">int</span>
 F2 <span class="token builtin">string</span>
 f3 <span class="token builtin">int</span>
 F4 <span class="token builtin">int</span>
 F5 <span class="token builtin">int</span>
<span class="token punctuation">}</span>
<span class="token comment">// 字段顺序赋值不推荐用法</span>
<span class="token keyword">var</span> t <span class="token operator">=</span> T<span class="token punctuation">{</span><span class="token number">11</span><span class="token punctuation">,</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">}</span> <span class="token comment">// 错误：implicit assignment of unexported field 'f3' in T literal</span>
或
<span class="token keyword">var</span> t <span class="token operator">=</span> T<span class="token punctuation">{</span><span class="token number">11</span><span class="token punctuation">,</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">}</span> <span class="token comment">// 错误：implicit assignment of unexported field 'f3' in T literal</span>

<span class="token comment">// 推荐用法：复合字面值</span>
<span class="token keyword">var</span> t <span class="token operator">=</span> T<span class="token punctuation">{</span>
 F2<span class="token punctuation">:</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">,</span>
 F1<span class="token punctuation">:</span> <span class="token number">11</span><span class="token punctuation">,</span>
 F4<span class="token punctuation">:</span> <span class="token number">14</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token comment">// 比较少使用</span>
tp <span class="token operator">:=</span> <span class="token function">new</span><span class="token punctuation">(</span>T<span class="token punctuation">)</span>
</code></pre></div><h3 id="使用特定的构造函数"><a href="#使用特定的构造函数" class="header-anchor">#</a> 使用特定的构造函数</h3> <p>使用特定的构造函数创建并初始化结构体变量的例子，并不罕见。在Go标准库中就有
很多，其中time.Timer这个结构体就是一个典型的例子</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token comment">// $GOROOT/src/time/sleep.go</span>
<span class="token keyword">type</span> runtimeTimer <span class="token keyword">struct</span> <span class="token punctuation">{</span>
 pp <span class="token builtin">uintptr</span>
 when <span class="token builtin">int64</span>
 period <span class="token builtin">int64</span>
 f <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token builtin">uintptr</span><span class="token punctuation">)</span> 
 arg <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
 seq <span class="token builtin">uintptr</span>
 nextwhen <span class="token builtin">int64</span>
 status <span class="token builtin">uint32</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> Timer <span class="token keyword">struct</span> <span class="token punctuation">{</span>
 C <span class="token operator">&lt;-</span><span class="token keyword">chan</span> Time
 r runtimeTimer
<span class="token punctuation">}</span>

<span class="token comment">// $GOROOT/src/time/sleep.go</span>
<span class="token keyword">func</span> <span class="token function">NewTimer</span><span class="token punctuation">(</span>d Duration<span class="token punctuation">)</span> <span class="token operator">*</span>Timer <span class="token punctuation">{</span>
 c <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> Time<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
 t <span class="token operator">:=</span> <span class="token operator">&amp;</span>Timer<span class="token punctuation">{</span>
 C<span class="token punctuation">:</span> c<span class="token punctuation">,</span>
 r<span class="token punctuation">:</span> runtimeTimer<span class="token punctuation">{</span>
 when<span class="token punctuation">:</span> <span class="token function">when</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">,</span>
 f<span class="token punctuation">:</span> sendTime<span class="token punctuation">,</span>
 arg<span class="token punctuation">:</span> c<span class="token punctuation">,</span>
 <span class="token punctuation">}</span><span class="token punctuation">,</span>
 <span class="token punctuation">}</span>
 <span class="token function">startTimer</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>t<span class="token punctuation">.</span>r<span class="token punctuation">)</span>
 <span class="token keyword">return</span> t
<span class="token punctuation">}</span>
</code></pre></div><p>Timer结构体中包含了一个非导出字段r，r的类型为另外一个结构体类型
runtimeTimer。这个结构体更为复杂，而且我们一眼就可以看出来，这个runtimeTimer结构体不是零值可用的，那我们在创建一个Timer类型变量时就没法使用显式复合字面值的方式了。这个时候，Go标准库提供了一个Timer结构体专用的构造函数NewTimer。NewTimer这个函数只接受一个表示定时时间的参数d，在经过一个复杂的初始化
过程后，它返回了一个处于可用状态的Timer类型指针实例。</p> <p>像这类通过专用构造函数进行结构体类型变量创建、初始化，它们的专用构造函数大多都符合这种模式：</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">NewT</span><span class="token punctuation">(</span>field1<span class="token punctuation">,</span> field2<span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">)</span> <span class="token operator">*</span>T <span class="token punctuation">{</span>
 <span class="token operator">...</span> <span class="token operator">...</span>
<span class="token punctuation">}</span>
</code></pre></div><p>NewT是结构体类型T的专用构造函数，它的参数列表中的参数通常与T定义中的导出字段相对应，返回值则是一个T指针类型的变量。T的非导出字段在NewT内部进行初始化，一些
需要复杂初始化逻辑的字段也会在NewT内部完成初始化。这样，我们只要调用NewT函数就
可以得到一个可用的T指针类型变量了。</p> <h3 id="访问结构体成员"><a href="#访问结构体成员" class="header-anchor">#</a> 访问结构体成员</h3> <div class="language-go extra-class"><pre class="language-go"><code>c1 <span class="token operator">:=</span>Course<span class="token punctuation">{</span>Name<span class="token punctuation">:</span><span class="token string">&quot;Python&quot;</span><span class="token punctuation">,</span>Price<span class="token punctuation">:</span><span class="token number">1000</span><span class="token punctuation">}</span>
fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>c1<span class="token punctuation">.</span>Name<span class="token punctuation">,</span>c1<span class="token punctuation">.</span>Price<span class="token punctuation">)</span>

c2 <span class="token operator">:=</span><span class="token operator">&amp;</span>Course<span class="token punctuation">{</span>Name<span class="token punctuation">:</span><span class="token string">&quot;Go&quot;</span><span class="token punctuation">,</span>Price<span class="token punctuation">:</span><span class="token number">1000</span><span class="token punctuation">}</span>
fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>c2<span class="token punctuation">.</span>Name<span class="token punctuation">,</span>c2<span class="token punctuation">.</span>Price<span class="token punctuation">)</span> <span class="token comment">// 这里其实是go语言的语法糖,go语言内部会将c2.Name转换成(*c2).Name</span>
<span class="token comment">// fmt.Println((*c2).Name,(*c2).Price)</span>
c3 <span class="token operator">:=</span>Course<span class="token punctuation">{</span><span class="token punctuation">}</span>
fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>c3<span class="token punctuation">.</span>Name<span class="token punctuation">,</span>c3<span class="token punctuation">.</span>Price<span class="token punctuation">)</span> <span class="token comment">// 0</span>
</code></pre></div><h3 id="结构体的拷贝"><a href="#结构体的拷贝" class="header-anchor">#</a> 结构体的拷贝</h3> <ul><li>结构体之间可以相互赋值，它在本质上是一次浅拷贝操作，拷贝了结构体内部的所有字段。</li> <li>结构体指针之间也可以相互赋值，它在本质上也是一次浅拷贝操作，不过它拷贝的仅仅是指针地址值，结构体的内容是共享的</li></ul> <div class="language-go extra-class"><pre class="language-go"><code>c4<span class="token operator">:=</span>c1
c1<span class="token punctuation">.</span>Price <span class="token operator">=</span> <span class="token number">3000</span>
fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>c1<span class="token punctuation">.</span>Name<span class="token punctuation">,</span>c1<span class="token punctuation">.</span>Price<span class="token punctuation">)</span> <span class="token comment">// Python 3000</span>
fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>c4<span class="token punctuation">.</span>Name<span class="token punctuation">,</span>c4<span class="token punctuation">.</span>Price<span class="token punctuation">)</span> <span class="token comment">// Python 1000</span>
c5<span class="token operator">:=</span>c2
c2<span class="token punctuation">.</span>Price <span class="token operator">=</span> <span class="token number">4000</span>
fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>c2<span class="token punctuation">.</span>Name<span class="token punctuation">,</span>c2<span class="token punctuation">.</span>Price<span class="token punctuation">)</span> <span class="token comment">// Go 4000</span>
fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>c5<span class="token punctuation">.</span>Name<span class="token punctuation">,</span>c5<span class="token punctuation">.</span>Price<span class="token punctuation">)</span> <span class="token comment">// Go 4000</span>
</code></pre></div><h3 id="结构体绑定方法"><a href="#结构体绑定方法" class="header-anchor">#</a> 结构体绑定方法</h3> <p>Go 语言的结构体方法里面没有 self 和 this 这样的关键字来指代当前的对象，它是用户自己定义的变量名称，通常我们都使用单个字母来表示。
例子：给Course结构体添加查询方法</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">type</span> Course <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	Name <span class="token builtin">string</span>
	Price <span class="token builtin">int</span>
<span class="token punctuation">}</span>
<span class="token comment">// 函数值传递</span>
<span class="token keyword">func</span><span class="token punctuation">(</span>c Course<span class="token punctuation">)</span> <span class="token function">printCourseInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;课程名：%s, 课程价格：%d&quot;</span><span class="token punctuation">,</span>c<span class="token punctuation">.</span>Name<span class="token punctuation">,</span>c<span class="token punctuation">.</span>Price<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span><span class="token punctuation">(</span>c Course<span class="token punctuation">)</span> <span class="token function">setCoursePrice</span><span class="token punctuation">(</span>price <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    c<span class="token punctuation">.</span>Price <span class="token operator">=</span> price
<span class="token punctuation">}</span>
<span class="token comment">// 函数指针传递</span>
<span class="token keyword">func</span><span class="token punctuation">(</span>c <span class="token operator">*</span>Course<span class="token punctuation">)</span> <span class="token function">setCPrice</span><span class="token punctuation">(</span>price <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    c<span class="token punctuation">.</span>Price <span class="token operator">=</span> price
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    e1 <span class="token operator">:=</span> Course<span class="token punctuation">{</span><span class="token string">&quot;Java&quot;</span><span class="token punctuation">,</span><span class="token number">3000</span><span class="token punctuation">}</span>
    e1<span class="token punctuation">.</span><span class="token function">printCourseInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">// 使用函数值传递无法修改结构体值</span>
    e1<span class="token punctuation">.</span><span class="token function">setCoursePrice</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span>
    e1<span class="token punctuation">.</span><span class="token function">printCourseInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">// 使用函数指针传递可修改结构体值</span>
    e1<span class="token punctuation">.</span><span class="token function">setCPrice</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span>
    e1<span class="token punctuation">.</span><span class="token function">printCourseInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>

</code></pre></div><p>结构体的接收者有两种形式</p> <ul><li>值传递</li> <li>指针传递<br>
如果想修改结构体的值或结构体的数据很大，使用指针传递。<br>
结构体指针方法和值方法在调用时形式上是没有区别的，只不过一个可以改变结构体内部状态，而另一个不会。指针方法使用结构体值变量可以调用，值方法使用结构体指针变量也可以调用。结构体的值类型和指针类型访问内部字段和方法在形式上是一样的。这点不同于 C++ 语言，在 C++ 语言里，值访问使用句点 . 操作符，而指针访问需要使用箭头 -&gt; 操作符。<br>
通过指针访问内部的字段需要 2 次内存读取操作，第一步是取得指针地址，第二部是读取地址的内容，它比值访问要慢。但是在方法调用时，指针传递可以避免结构体的拷贝操作，结构体比较大时，这种性能的差距就会比较明显。<br>
还有一些特殊的结构体它不允许被复制，比如结构体内部包含有锁时，这时就必须使用它的指针形式来定义方法，否则会发生一些莫名其妙的问题。</li></ul> <p>另一个例子</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;math&quot;</span>

<span class="token keyword">type</span> Circle <span class="token keyword">struct</span> <span class="token punctuation">{</span>
 x <span class="token builtin">int</span>
 y <span class="token builtin">int</span>
 Radius <span class="token builtin">int</span>
<span class="token punctuation">}</span>

<span class="token comment">// 面积</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>c Circle<span class="token punctuation">)</span> <span class="token function">Area</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">float64</span> <span class="token punctuation">{</span>
 <span class="token keyword">return</span> math<span class="token punctuation">.</span>Pi <span class="token operator">*</span> <span class="token function">float64</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span>Radius<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token function">float64</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span>Radius<span class="token punctuation">)</span>
 <span class="token comment">// Go 语言不喜欢类型的隐式转换，所以需要将整形显示转换成浮点型，不是很好看，不过这就是 Go 语言的基本规则，显式的代码可能不够简洁，但是易于理解。</span>
<span class="token punctuation">}</span>

<span class="token comment">// 周长</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>c Circle<span class="token punctuation">)</span> <span class="token function">Circumference</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">float64</span> <span class="token punctuation">{</span>
 <span class="token keyword">return</span> <span class="token number">2</span> <span class="token operator">*</span> math<span class="token punctuation">.</span>Pi <span class="token operator">*</span> <span class="token function">float64</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span>Radius<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>Circle<span class="token punctuation">)</span> <span class="token function">expand</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  c<span class="token punctuation">.</span>Radius <span class="token operator">*=</span> <span class="token number">2</span>
<span class="token punctuation">}</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token keyword">var</span> c <span class="token operator">=</span> Circle <span class="token punctuation">{</span>Radius<span class="token punctuation">:</span> <span class="token number">50</span><span class="token punctuation">}</span>
 fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">Area</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> c<span class="token punctuation">.</span><span class="token function">Circumference</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
 <span class="token comment">// 指针变量调用方法形式上是一样的</span>
 <span class="token keyword">var</span> pc <span class="token operator">=</span> <span class="token operator">&amp;</span>c
 fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>pc<span class="token punctuation">.</span><span class="token function">Area</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> pc<span class="token punctuation">.</span><span class="token function">Circumference</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="通过内嵌结构体实现继承效果"><a href="#通过内嵌结构体实现继承效果" class="header-anchor">#</a> 通过内嵌结构体实现继承效果</h3> <p>go语言不支持结构体继承，但可以通过组合这种设计模式达到继承效果。<br>
例子：</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">type</span> Teacher <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	Name <span class="token builtin">string</span>
	Age <span class="token builtin">int</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> Course <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    Teacher Teacher
	Name <span class="token builtin">string</span>
	Price <span class="token builtin">int</span>
<span class="token punctuation">}</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

f1 <span class="token operator">:=</span> Course<span class="token punctuation">{</span>
    Teacher<span class="token punctuation">:</span> Teacher<span class="token punctuation">{</span>
        Name <span class="token punctuation">:</span> <span class="token string">&quot;Tom&quot;</span><span class="token punctuation">,</span>
        Age<span class="token punctuation">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    Name<span class="token punctuation">:</span> <span class="token string">&quot;Go&quot;</span><span class="token punctuation">,</span>
	Price<span class="token punctuation">:</span> <span class="token number">3900</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;课程名：%s, 课程价格：%d, 授课老师姓名：%s&quot;</span><span class="token punctuation">,</span>f1<span class="token punctuation">.</span>Name<span class="token punctuation">,</span>f1<span class="token punctuation">.</span>Price<span class="token punctuation">,</span>f1<span class="token punctuation">.</span>Teacher<span class="token punctuation">.</span>Name<span class="token punctuation">)</span>
	
</code></pre></div><h4 id="匿名嵌套"><a href="#匿名嵌套" class="header-anchor">#</a> 匿名嵌套</h4> <p>优化上面的例子</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">type</span> Teacher <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	Name <span class="token builtin">string</span>
	Age <span class="token builtin">int</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> Course <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    Teacher <span class="token comment">// 主要改动这里</span>
	Name <span class="token builtin">string</span>
	Price <span class="token builtin">int</span>
<span class="token punctuation">}</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

f1 <span class="token operator">:=</span> Course<span class="token punctuation">{</span>
     Teacher<span class="token punctuation">:</span> Teacher<span class="token punctuation">{</span>
        Name <span class="token punctuation">:</span> <span class="token string">&quot;Tom&quot;</span><span class="token punctuation">,</span>
        Age<span class="token punctuation">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    Name<span class="token punctuation">:</span> <span class="token string">&quot;Go&quot;</span><span class="token punctuation">,</span>
	Price<span class="token punctuation">:</span> <span class="token number">3900</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token comment">// 内部类型属性可以被提升到外部属性</span>
fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;课程名：%s, 课程价格：%d, 授课老师姓名：%s,授课老师年龄：%d&quot;</span><span class="token punctuation">,</span>f1<span class="token punctuation">.</span>Name<span class="token punctuation">,</span>f1<span class="token punctuation">.</span>Price<span class="token punctuation">,</span>f1<span class="token punctuation">.</span>Teacher<span class="token punctuation">.</span>Name<span class="token punctuation">,</span>f1<span class="token punctuation">.</span>Age<span class="token punctuation">)</span> <span class="token comment">// Course没有Age字段可以直接使用f1.Age来代替f1.Teacher.Age</span>
</code></pre></div><h3 id="结构体标签"><a href="#结构体标签" class="header-anchor">#</a> 结构体标签</h3> <p>结构体的字段除了名字和类型外，还可以有一个可选的标签（tag）：它是一个附属于字段的字符串，可以是文档或其他的重要标记。<br>
比如在我们解析json或生成json文件时，常用到encoding/json包，它提供一些默认标签，例如：omitempty标签可以在序列化的时候忽略0值或者空值。而-标签的作用是不进行序列化，其效果和和直接将结构体中的字段写成小写的效果一样。</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">type</span> Info <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    Name <span class="token builtin">string</span>
    Age  <span class="token builtin">int</span> <span class="token string">`json:&quot;age,omitempty&quot;`</span>
    Sex  <span class="token builtin">string</span>
<span class="token punctuation">}</span>

</code></pre></div><p>在序列化和反序列化的时候，也支持类型转化等操作。如</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">type</span> Info <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    Name <span class="token builtin">string</span>
    Age  <span class="token builtin">int</span>   <span class="token string">`json:&quot;age,string&quot;`</span>
    <span class="token comment">//这样生成的json对象中，age就为字符串</span>
    Sex  <span class="token builtin">string</span>
<span class="token punctuation">}</span>
</code></pre></div><p>示例：</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">type</span> People <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    Name <span class="token builtin">string</span> <span class="token string">`json:&quot;name&quot;`</span> <span class="token comment">// 输出的时候key转为name</span>
    Age  <span class="token builtin">int</span>    <span class="token string">`json:&quot;age,omitempty&quot;`</span> <span class="token comment">// 在序列化的时候忽略0值或者空值</span>
    Sex  <span class="token builtin">string</span> <span class="token string">`json:&quot;sex,required&quot;`</span>
	Height  <span class="token builtin">int</span>    <span class="token string">`json:&quot;height,string&quot;`</span> <span class="token comment">// 在序列化的时候转换为string</span>
	Hobby  <span class="token builtin">string</span>   <span class="token string">`json:&quot;-&quot;`</span> <span class="token comment">// 不输出</span>

<span class="token punctuation">}</span>

person <span class="token operator">:=</span>People <span class="token punctuation">{</span>
		Name<span class="token punctuation">:</span> <span class="token string">&quot;Lucy&quot;</span><span class="token punctuation">,</span>
        Age<span class="token punctuation">:</span>  <span class="token number">0</span><span class="token punctuation">,</span>
        Sex<span class="token punctuation">:</span>  <span class="token string">&quot;male&quot;</span><span class="token punctuation">,</span>
		Height<span class="token punctuation">:</span> <span class="token number">180</span><span class="token punctuation">,</span>
		Hobby<span class="token punctuation">:</span> <span class="token string">&quot;love music&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

re<span class="token punctuation">,</span><span class="token boolean">_</span> <span class="token operator">:=</span>json<span class="token punctuation">.</span><span class="token function">Marshal</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span>
fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Json:&quot;</span><span class="token punctuation">,</span> <span class="token function">string</span><span class="token punctuation">(</span>re<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// {&quot;name&quot;:&quot;Lucy&quot;,&quot;sex&quot;:&quot;male&quot;,&quot;height&quot;:&quot;180&quot;}</span>

</code></pre></div><h4 id="用反射获取到自定义的结构体标签"><a href="#用反射获取到自定义的结构体标签" class="header-anchor">#</a> 用反射获取到自定义的结构体标签</h4> <p>现在来了解下如何设置自定义的标签，以及如何像官方包一样，可以通过标签，对字段进行自定义处理。要实现这些，我们要用到reflect包。</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
    <span class="token string">&quot;fmt&quot;</span>
    <span class="token string">&quot;reflect&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">const</span> tagName <span class="token operator">=</span> <span class="token string">&quot;Testing&quot;</span>

<span class="token keyword">type</span> Info <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    Name <span class="token builtin">string</span> <span class="token string">`Testing:&quot;-&quot;`</span>
    Age  <span class="token builtin">int</span>    <span class="token string">`Testing:&quot;age,min=17,max=60&quot;`</span>
    Sex  <span class="token builtin">string</span> <span class="token string">`Testing:&quot;sex,required&quot;`</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    info <span class="token operator">:=</span> Info<span class="token punctuation">{</span>
        Name<span class="token punctuation">:</span> <span class="token string">&quot;benben&quot;</span><span class="token punctuation">,</span>
        Age<span class="token punctuation">:</span>  <span class="token number">23</span><span class="token punctuation">,</span>
        Sex<span class="token punctuation">:</span>  <span class="token string">&quot;male&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//通过反射，我们获取变量的动态类型</span>
    t <span class="token operator">:=</span> reflect<span class="token punctuation">.</span><span class="token function">TypeOf</span><span class="token punctuation">(</span>info<span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Type:&quot;</span><span class="token punctuation">,</span> t<span class="token punctuation">.</span><span class="token function">Name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Kind:&quot;</span><span class="token punctuation">,</span> t<span class="token punctuation">.</span><span class="token function">Kind</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> t<span class="token punctuation">.</span><span class="token function">NumField</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
        field <span class="token operator">:=</span> t<span class="token punctuation">.</span><span class="token function">Field</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token comment">//获取结构体的每一个字段</span>
        tag <span class="token operator">:=</span> field<span class="token punctuation">.</span>Tag<span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span>tagName<span class="token punctuation">)</span>
        fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%d. %v (%v), tag: '%v'\n&quot;</span><span class="token punctuation">,</span> i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> field<span class="token punctuation">.</span>Name<span class="token punctuation">,</span> field<span class="token punctuation">.</span>Type<span class="token punctuation">.</span><span class="token function">Name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> tag<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>    
</code></pre></div><h4 id="常用的结构体标签键"><a href="#常用的结构体标签键" class="header-anchor">#</a> 常用的结构体标签键</h4> <p>常用的结构体标签Key，指的是那些被一些常用的开源包声明使用的结构体标签键。在这里总结了一些，都是一些我们平时会用到的包，它们是：</p> <ul><li>json:  由encoding/json 包使用，详见json.Marshal()的使用方法和实现逻辑。</li> <li>xml :  由encoding/xml包使用，详见xml.Marshal()。</li> <li>bson:  由gobson包，和mongo-go包使用。</li> <li>protobuf:  由github.com/golang/protobuf/proto 使用，在包文档中有详细说明。</li> <li>yaml:  由gopkg.in/yaml.v2 包使用，详见yaml.Marshal()。</li> <li>gorm:  由gorm.io/gorm包使用，示例可以在GORM的文档中找到。</li></ul> <h3 id="结构体占用内存的大小"><a href="#结构体占用内存的大小" class="header-anchor">#</a> 结构体占用内存的大小</h3> <h4 id="使用sizeof来查看对象占用的长度"><a href="#使用sizeof来查看对象占用的长度" class="header-anchor">#</a> 使用Sizeof来查看对象占用的长度</h4> <div class="language-go extra-class"><pre class="language-go"><code>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>unsafe<span class="token punctuation">.</span><span class="token function">Sizeof</span><span class="token punctuation">(</span>c1<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// c1结构体包含1个字符串和1个int64类型，在64机器上字符串占用16字节，int64占用8字节，合起来为结构体占用大小</span>
</code></pre></div><h3 id="结构体类型的内存布局"><a href="#结构体类型的内存布局" class="header-anchor">#</a> 结构体类型的内存布局</h3> <p>结构体类型是既数组类型之后，又一个以平铺形式存放在连续内存块中的类型。不过与数组类型不同，由于内存对齐的要求，结构体类型各个相邻字段间可能存在“填充物”，结构体的尾部同样可能被Go编译器填充额外的字节，满足结构体整体对齐的约束。正是因为这点，我们在定义结构体时，一定要合理安排字段顺序，要让结构体类型对内存空间的占用最小。</p> <h2 id="go语言内置的高级数据结构都是由结构体来完成的"><a href="#go语言内置的高级数据结构都是由结构体来完成的" class="header-anchor">#</a> Go语言内置的高级数据结构都是由结构体来完成的</h2> <p>通过观察 Go 语言的底层源码，可以发现所有的 Go 语言内置的高级数据结构都是由结构体来完成的。</p> <h3 id="string本质是结构体"><a href="#string本质是结构体" class="header-anchor">#</a> string本质是结构体</h3> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">type</span> slice <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    Data <span class="token builtin">uintptr</span> <span class="token comment">// 指针占8个长度</span>
    Len <span class="token builtin">int</span> <span class="token comment">// 长度，64位系统占8个长度</span>
    
<span class="token punctuation">}</span>
</code></pre></div><p>在64位机器上将会占用 16 个字节</p> <h3 id="slice本质是结构体"><a href="#slice本质是结构体" class="header-anchor">#</a> slice本质是结构体</h3> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">type</span> slice <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    array unsafe<span class="token punctuation">.</span>Pointer <span class="token comment">// 底层数组的地址</span>
    <span class="token builtin">len</span> <span class="token builtin">int</span> <span class="token comment">// 长度</span>
    <span class="token builtin">cap</span> <span class="token builtin">int</span> <span class="token comment">// 容量</span>
<span class="token punctuation">}</span>
</code></pre></div><p>切片头的结构体形式如下，它在64位机器上将会占用 24 个字节。</p> <div class="language-go extra-class"><pre class="language-go"><code>s1 <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;python&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;go&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;java&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;cplus&quot;</span><span class="token punctuation">}</span>
fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>unsafe<span class="token punctuation">.</span><span class="token function">Sizeof</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token punctuation">)</span> 
</code></pre></div><p>slice的函数传递本质上也是值传递。</p> <h3 id="map本质是结构体"><a href="#map本质是结构体" class="header-anchor">#</a> map本质是结构体</h3> <p>在64位机器上map将会占用8个字节</p> <div class="language-go extra-class"><pre class="language-go"><code>m1 <span class="token operator">:=</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span>
    <span class="token string">&quot;course1&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;python&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;course2&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;go&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;course3&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;java&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;course4&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;cplus&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>unsafe<span class="token punctuation">.</span><span class="token function">Sizeof</span><span class="token punctuation">(</span>m1<span class="token punctuation">)</span><span class="token punctuation">)</span> 
</code></pre></div><h2 id="大小写在go语言中的重要性"><a href="#大小写在go语言中的重要性" class="header-anchor">#</a> 大小写在go语言中的重要性</h2> <p>大小写在go语言中起到是否可见的作用：</p> <ul><li>一个包中的变量或者结构体如果首字母是小写，那么对于另一个包不可见</li> <li>结构体定义的名称以及属性首字母大写很重要</li></ul> <h2 id="type关键字"><a href="#type关键字" class="header-anchor">#</a> type关键字</h2> <p>type关键字的作用常用以下5钟情况</p> <h3 id="作用1-给一个类型定义为别名"><a href="#作用1-给一个类型定义为别名" class="header-anchor">#</a> 作用1：给一个类型定义为别名</h3> <p>类型别名的形式只是多了一个等号，但正是这个等号让新类型T与原类型S完全等价。完全等价的意思就是，类型别名并没有定义出新类型，T与S实际上就是同一种类型，它们只是一种类型的两个名字罢了，就像一个人有一个大名、一个小名一样。<br>
如：byte，本质上仍然是uint8，但go定义为byte是为了代码的可读性，强调我们现在处理的对象是字节类型.</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token comment">// 形式</span>
<span class="token keyword">type</span> T <span class="token operator">=</span> S <span class="token comment">// type alias</span>

<span class="token keyword">type</span> MyByte <span class="token operator">=</span> <span class="token builtin">byte</span>
<span class="token keyword">var</span> m MyByte
fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%T&quot;</span><span class="token punctuation">,</span>m<span class="token punctuation">)</span> <span class="token comment">// uint8</span>
</code></pre></div><h3 id="作用2-基于一个已有的类型定义一个新的类型"><a href="#作用2-基于一个已有的类型定义一个新的类型" class="header-anchor">#</a> 作用2：基于一个已有的类型定义一个新的类型</h3> <div class="language-go extra-class"><pre class="language-go"><code><span class="token comment">// 形式</span>
<span class="token comment">// 在这里，S可以是任何一个已定义的类型，包括Go原生类型，或者是其他已定义的自定义类型</span>
<span class="token keyword">type</span> T S <span class="token comment">// 定义一个新类型T</span>

<span class="token keyword">type</span> MyInt <span class="token builtin">int</span>
<span class="token keyword">var</span> n MyInt
fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%T&quot;</span><span class="token punctuation">,</span>n<span class="token punctuation">)</span> <span class="token comment">// main.MyInt</span>

<span class="token comment">// 这段代码中，新类型T1是基于Go原生类型int定义的新自定义类型，而新类型T2则是基于刚刚定义的类型T1，定义的新类型</span>
<span class="token keyword">type</span> T1 <span class="token builtin">int</span> 
<span class="token keyword">type</span> T2 T1
</code></pre></div><p>引入一个新概念，底层类型。如果一个新类型是基于某个Go原生类型定义的，那么我们就叫Go原生类型为新类型的底层类型（Underlying Type)。比如这个例子中，类型int就是类型T1的底层类型。
这里，T2是基于T1类型创建的，那么T2类型的底层类型就是T1的底层类型，而T1的底层类型我们已经知道了，是类型int，那么T2的底层类型也是类型int。<br>
为什么我们要提到底层类型这个概念呢？因为底层类型在Go语言中有重要作用，它被用来判断两个类型本质上是否相同（Identical）。<br>
在上面例子中，虽然T1和T2是不同类型，但因为它们的底层类型都是类型int，所以它们在本质上是相同的。而本质上相同的两个类型，它们的变量可以通过显式转型进行相互赋值，相反，如果本质上是不同的两个类型，它们的变量间连显式转型都不可能，更不要说相互赋值了。</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">type</span> T1 <span class="token builtin">int</span>
<span class="token keyword">type</span> T2 T1
<span class="token keyword">type</span> T3 <span class="token builtin">string</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token keyword">var</span> n1 T1
 <span class="token keyword">var</span> n2 T2 <span class="token operator">=</span> <span class="token number">5</span>
 n1 <span class="token operator">=</span> <span class="token function">T1</span><span class="token punctuation">(</span>n2<span class="token punctuation">)</span> <span class="token comment">// ok</span>
 
 <span class="token keyword">var</span> s T3 <span class="token operator">=</span> <span class="token string">&quot;hello&quot;</span>
 n1 <span class="token operator">=</span> <span class="token function">T1</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token comment">// 错误：cannot convert s (type T3) to type T1</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="作用3-基于类型字面值定义一个新的类型"><a href="#作用3-基于类型字面值定义一个新的类型" class="header-anchor">#</a> 作用3：基于类型字面值定义一个新的类型</h3> <p>基于类型字面值来定义新类型，这种方式多用于自定义一个新的复合类型，比如：</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">type</span> M <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token builtin">string</span>
<span class="token keyword">type</span> S <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span>
</code></pre></div><p>、</p> <h3 id="作用4-定义结构体"><a href="#作用4-定义结构体" class="header-anchor">#</a> 作用4：定义结构体</h3> <p>见本章</p> <h3 id="作用5-定义接口"><a href="#作用5-定义接口" class="header-anchor">#</a> 作用5：定义接口</h3> <p>见Interface章节</p> <h3 id="作用6-定义函数别名"><a href="#作用6-定义函数别名" class="header-anchor">#</a> 作用6：定义函数别名</h3> <h2 id="go语言特殊地方"><a href="#go语言特殊地方" class="header-anchor">#</a> go语言特殊地方</h2> <p>go语言不支持面向对象与不是面向对象语言在于它的结构体不支持多态，它不能算是一个严格的面向对象语言。
面向对象几个基本特征：</p> <ul><li>封装</li> <li>继承<br>
go使用嵌套方式可以实现继承。所谓的继承仅仅是形式上的语法糖，c.show() 被转换成二进制代码后和 c.Point.show() 是等价的，c.x 和 c.Point.x 也是等价的。</li> <li>多态<br>
多态是指父类定义的方法可以调用子类实现的方法，不同的子类有不同的实现，从而给父类的方法带来了多样的不同行为。但是go语言支持鸭子类型，使用接口的方式可以实现多态。</li> <li>方法重载</li> <li>抽象基类<br>
定义struct时由于go语言没有class概念对新学习编程的人会少理解很多面向对象的概念</li></ul></div></section> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/go/basic/Pointer.html" class="prev">
          指针
        </a></span> <span class="next"><a href="/go/basic/Operator.html">
          运算符
        </a></span></p></div> <div class="comments-wrapper"><!----></div></main></div> <!----></div> <ul class="sub-sidebar sub-sidebar-wrapper" style="width:12rem;" data-v-b57cc07c data-v-7dd95ae2><li class="level-2" data-v-b57cc07c><a href="/go/basic/Structure.html#结构体定义" class="sidebar-link reco-side-结构体定义" data-v-b57cc07c>结构体定义</a></li><li class="level-2" data-v-b57cc07c><a href="/go/basic/Structure.html#使用结构体" class="sidebar-link reco-side-使用结构体" data-v-b57cc07c>使用结构体</a></li><li class="level-3" data-v-b57cc07c><a href="/go/basic/Structure.html#空结构体" class="sidebar-link reco-side-空结构体" data-v-b57cc07c>空结构体</a></li><li class="level-3" data-v-b57cc07c><a href="/go/basic/Structure.html#零值结构体和nil结构体" class="sidebar-link reco-side-零值结构体和nil结构体" data-v-b57cc07c>零值结构体和nil结构体</a></li><li class="level-3" data-v-b57cc07c><a href="/go/basic/Structure.html#赋值结构体" class="sidebar-link reco-side-赋值结构体" data-v-b57cc07c>赋值结构体</a></li><li class="level-3" data-v-b57cc07c><a href="/go/basic/Structure.html#使用特定的构造函数" class="sidebar-link reco-side-使用特定的构造函数" data-v-b57cc07c>使用特定的构造函数</a></li><li class="level-3" data-v-b57cc07c><a href="/go/basic/Structure.html#访问结构体成员" class="sidebar-link reco-side-访问结构体成员" data-v-b57cc07c>访问结构体成员</a></li><li class="level-3" data-v-b57cc07c><a href="/go/basic/Structure.html#结构体的拷贝" class="sidebar-link reco-side-结构体的拷贝" data-v-b57cc07c>结构体的拷贝</a></li><li class="level-3" data-v-b57cc07c><a href="/go/basic/Structure.html#结构体绑定方法" class="sidebar-link reco-side-结构体绑定方法" data-v-b57cc07c>结构体绑定方法</a></li><li class="level-3" data-v-b57cc07c><a href="/go/basic/Structure.html#通过内嵌结构体实现继承效果" class="sidebar-link reco-side-通过内嵌结构体实现继承效果" data-v-b57cc07c>通过内嵌结构体实现继承效果</a></li><li class="level-3" data-v-b57cc07c><a href="/go/basic/Structure.html#结构体标签" class="sidebar-link reco-side-结构体标签" data-v-b57cc07c>结构体标签</a></li><li class="level-3" data-v-b57cc07c><a href="/go/basic/Structure.html#结构体占用内存的大小" class="sidebar-link reco-side-结构体占用内存的大小" data-v-b57cc07c>结构体占用内存的大小</a></li><li class="level-3" data-v-b57cc07c><a href="/go/basic/Structure.html#结构体类型的内存布局" class="sidebar-link reco-side-结构体类型的内存布局" data-v-b57cc07c>结构体类型的内存布局</a></li><li class="level-2" data-v-b57cc07c><a href="/go/basic/Structure.html#go语言内置的高级数据结构都是由结构体来完成的" class="sidebar-link reco-side-go语言内置的高级数据结构都是由结构体来完成的" data-v-b57cc07c>Go语言内置的高级数据结构都是由结构体来完成的</a></li><li class="level-3" data-v-b57cc07c><a href="/go/basic/Structure.html#string本质是结构体" class="sidebar-link reco-side-string本质是结构体" data-v-b57cc07c>string本质是结构体</a></li><li class="level-3" data-v-b57cc07c><a href="/go/basic/Structure.html#slice本质是结构体" class="sidebar-link reco-side-slice本质是结构体" data-v-b57cc07c>slice本质是结构体</a></li><li class="level-3" data-v-b57cc07c><a href="/go/basic/Structure.html#map本质是结构体" class="sidebar-link reco-side-map本质是结构体" data-v-b57cc07c>map本质是结构体</a></li><li class="level-2" data-v-b57cc07c><a href="/go/basic/Structure.html#大小写在go语言中的重要性" class="sidebar-link reco-side-大小写在go语言中的重要性" data-v-b57cc07c>大小写在go语言中的重要性</a></li><li class="level-2" data-v-b57cc07c><a href="/go/basic/Structure.html#type关键字" class="sidebar-link reco-side-type关键字" data-v-b57cc07c>type关键字</a></li><li class="level-3" data-v-b57cc07c><a href="/go/basic/Structure.html#作用1-给一个类型定义为别名" class="sidebar-link reco-side-作用1-给一个类型定义为别名" data-v-b57cc07c>作用1：给一个类型定义为别名</a></li><li class="level-3" data-v-b57cc07c><a href="/go/basic/Structure.html#作用2-基于一个已有的类型定义一个新的类型" class="sidebar-link reco-side-作用2-基于一个已有的类型定义一个新的类型" data-v-b57cc07c>作用2：基于一个已有的类型定义一个新的类型</a></li><li class="level-3" data-v-b57cc07c><a href="/go/basic/Structure.html#作用3-基于类型字面值定义一个新的类型" class="sidebar-link reco-side-作用3-基于类型字面值定义一个新的类型" data-v-b57cc07c>作用3：基于类型字面值定义一个新的类型</a></li><li class="level-3" data-v-b57cc07c><a href="/go/basic/Structure.html#作用4-定义结构体" class="sidebar-link reco-side-作用4-定义结构体" data-v-b57cc07c>作用4：定义结构体</a></li><li class="level-3" data-v-b57cc07c><a href="/go/basic/Structure.html#作用5-定义接口" class="sidebar-link reco-side-作用5-定义接口" data-v-b57cc07c>作用5：定义接口</a></li><li class="level-3" data-v-b57cc07c><a href="/go/basic/Structure.html#作用6-定义函数别名" class="sidebar-link reco-side-作用6-定义函数别名" data-v-b57cc07c>作用6：定义函数别名</a></li><li class="level-2" data-v-b57cc07c><a href="/go/basic/Structure.html#go语言特殊地方" class="sidebar-link reco-side-go语言特殊地方" data-v-b57cc07c>go语言特殊地方</a></li></ul></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/go/assets/js/app.3a476b27.js" defer></script><script src="/go/assets/js/3.03adf80f.js" defer></script><script src="/go/assets/js/1.912b4b55.js" defer></script><script src="/go/assets/js/30.3d127f37.js" defer></script>
  </body>
</html>
